(()=>{var e={562:e=>{function t(e){return"number"==typeof e||!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function n(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}e.exports=function(e,r){r||(r={});var o={bools:{},strings:{},unknownFn:null};"function"==typeof r.unknown&&(o.unknownFn=r.unknown),"boolean"==typeof r.boolean&&r.boolean?o.allBools=!0:[].concat(r.boolean).filter(Boolean).forEach((function(e){o.bools[e]=!0}));var i={};Object.keys(r.alias||{}).forEach((function(e){i[e]=[].concat(r.alias[e]),i[e].forEach((function(t){i[t]=[e].concat(i[e].filter((function(e){return t!==e})))}))})),[].concat(r.string).filter(Boolean).forEach((function(e){o.strings[e]=!0,i[e]&&(o.strings[i[e]]=!0)}));var s=r.default||{},a={_:[]};Object.keys(o.bools).forEach((function(e){l(e,void 0!==s[e]&&s[e])}));var c=[];function l(e,n,r){if(!r||!o.unknownFn||function(e,t){return o.allBools&&/^--[^=]+$/.test(t)||o.strings[e]||o.bools[e]||i[e]}(e,r)||!1!==o.unknownFn(r)){var s=!o.strings[e]&&t(n)?Number(n):n;u(a,e.split("."),s),(i[e]||[]).forEach((function(e){u(a,e.split("."),s)}))}}function u(e,t,r){for(var i=e,s=0;s<t.length-1;s++){if(n(i,a=t[s]))return;void 0===i[a]&&(i[a]={}),i[a]!==Object.prototype&&i[a]!==Number.prototype&&i[a]!==String.prototype||(i[a]={}),i[a]===Array.prototype&&(i[a]=[]),i=i[a]}var a;n(i,a=t[t.length-1])||(i!==Object.prototype&&i!==Number.prototype&&i!==String.prototype||(i={}),i===Array.prototype&&(i=[]),void 0===i[a]||o.bools[a]||"boolean"==typeof i[a]?i[a]=r:Array.isArray(i[a])?i[a].push(r):i[a]=[i[a],r])}function f(e){return i[e].some((function(e){return o.bools[e]}))}-1!==e.indexOf("--")&&(c=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var p=0;p<e.length;p++){var h=e[p];if(/^--.+=/.test(h)){var g=h.match(/^--([^=]+)=([\s\S]*)$/),v=g[1],d=g[2];o.bools[v]&&(d="false"!==d),l(v,d,h)}else if(/^--no-.+/.test(h))l(v=h.match(/^--no-(.+)/)[1],!1,h);else if(/^--.+/.test(h))v=h.match(/^--(.+)/)[1],void 0===(m=e[p+1])||/^-/.test(m)||o.bools[v]||o.allBools||i[v]&&f(v)?/^(true|false)$/.test(m)?(l(v,"true"===m,h),p++):l(v,!o.strings[v]||"",h):(l(v,m,h),p++);else if(/^-[^-]+/.test(h)){for(var y=h.slice(1,-1).split(""),w=!1,b=0;b<y.length;b++){var m;if("-"!==(m=h.slice(b+2))){if(/[A-Za-z]/.test(y[b])&&/=/.test(m)){l(y[b],m.split("=")[1],h),w=!0;break}if(/[A-Za-z]/.test(y[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(m)){l(y[b],m,h),w=!0;break}if(y[b+1]&&y[b+1].match(/\W/)){l(y[b],h.slice(b+2),h),w=!0;break}l(y[b],!o.strings[y[b]]||"",h)}else l(y[b],m,h)}v=h.slice(-1)[0],w||"-"===v||(!e[p+1]||/^(-|--)[^-]/.test(e[p+1])||o.bools[v]||i[v]&&f(v)?e[p+1]&&/^(true|false)$/.test(e[p+1])?(l(v,"true"===e[p+1],h),p++):l(v,!o.strings[v]||"",h):(l(v,e[p+1],h),p++))}else if(o.unknownFn&&!1===o.unknownFn(h)||a._.push(o.strings._||!t(h)?h:Number(h)),r.stopEarly){a._.push.apply(a._,e.slice(p+1));break}}return Object.keys(s).forEach((function(e){var t,n,r;t=a,n=e.split("."),r=t,n.slice(0,-1).forEach((function(e){r=r[e]||{}})),n[n.length-1]in r||(u(a,e.split("."),s[e]),(i[e]||[]).forEach((function(t){u(a,t.split("."),s[e])})))})),r["--"]?(a["--"]=new Array,c.forEach((function(e){a["--"].push(e)}))):c.forEach((function(e){a._.push(e)})),a}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(562),t=n.n(e);const r=require("fs");var o=n.n(r);const i=require("path");var s=n.n(i),a=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===a.call(e)};function l(e){return"function"==typeof e}function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(e,t){return null!=e&&"object"==typeof e&&t in e}var p=RegExp.prototype.test,h=/\S/;var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},v=/\s*/,d=/\s+/,y=/\s*=/,w=/\s*\}/,b=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function E(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function k(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},E.prototype.push=function(e){return new E(e,this)},E.prototype.lookup=function(e){var t,n,r,o=this.cache;if(o.hasOwnProperty(e))t=o[e];else{for(var i,s,a,c=this,u=!1;c;){if(e.indexOf(".")>0)for(i=c.view,s=e.split("."),a=0;null!=i&&a<s.length;)a===s.length-1&&(u=f(i,s[a])||(n=i,r=s[a],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),i=i[s[a++]];else i=c.view[e],u=f(c.view,e);if(u){t=i;break}c=c.parent}o[e]=t}return l(t)&&(t=t.call(this.view)),t},k.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},k.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||x.tags).join(":"),o=void 0!==n,i=o?n.get(r):void 0;return null==i&&(i=function(e,t){if(!e)return[];var n,r,o,i,s=!1,a=[],l=[],f=[],g=!1,E=!1,k="",C=0;function O(){if(g&&!E)for(;f.length;)delete l[f.pop()];else f=[];g=!1,E=!1}function j(e){if("string"==typeof e&&(e=e.split(d,2)),!c(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(u(e[0])+"\\s*"),r=new RegExp("\\s*"+u(e[1])),o=new RegExp("\\s*"+u("}"+e[1]))}j(t||x.tags);for(var S,_,T,A,U,P,F=new m(e);!F.eos();){if(S=F.pos,T=F.scanUntil(n))for(var V=0,N=T.length;V<N;++V)i=A=T.charAt(V),function(e,t){return p.call(e,t)}(h,i)?(E=!0,s=!0,k+=" "):(f.push(l.length),k+=A),l.push(["text",A,S,S+1]),S+=1,"\n"===A&&(O(),k="",C=0,s=!1);if(!F.scan(n))break;if(g=!0,_=F.scan(b)||"name",F.scan(v),"="===_?(T=F.scanUntil(y),F.scan(y),F.scanUntil(r)):"{"===_?(T=F.scanUntil(o),F.scan(w),F.scanUntil(r),_="&"):T=F.scanUntil(r),!F.scan(r))throw new Error("Unclosed tag at "+F.pos);if(U=">"==_?[_,T,S,F.pos,k,C,s]:[_,T,S,F.pos],C++,l.push(U),"#"===_||"^"===_)a.push(U);else if("/"===_){if(!(P=a.pop()))throw new Error('Unopened section "'+T+'" at '+S);if(P[1]!==T)throw new Error('Unclosed section "'+P[1]+'" at '+S)}else"name"===_||"{"===_||"&"===_?E=!0:"="===_&&j(T)}if(O(),P=a.pop())throw new Error('Unclosed section "'+P[1]+'" at '+F.pos);return function(e){for(var t,n=[],r=n,o=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":o.pop()[5]=t[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(l))}(e,t),o&&n.set(r,i)),i},k.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),i=this.parse(e,o),s=t instanceof E?t:new E(t,void 0);return this.renderTokens(i,s,n,e,r)},k.prototype.renderTokens=function(e,t,n,r,o){for(var i,s,a,c="",l=0,u=e.length;l<u;++l)a=void 0,"#"===(s=(i=e[l])[0])?a=this.renderSection(i,t,n,r,o):"^"===s?a=this.renderInverted(i,t,n,r,o):">"===s?a=this.renderPartial(i,t,n,o):"&"===s?a=this.unescapedValue(i,t):"name"===s?a=this.escapedValue(i,t,o):"text"===s&&(a=this.rawValue(i)),void 0!==a&&(c+=a);return c},k.prototype.renderSection=function(e,t,n,r,o){var i=this,s="",a=t.lookup(e[1]);if(a){if(c(a))for(var u=0,f=a.length;u<f;++u)s+=this.renderTokens(e[4],t.push(a[u]),n,r,o);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)s+=this.renderTokens(e[4],t.push(a),n,r,o);else if(l(a)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,r.slice(e[3],e[5]),(function(e){return i.render(e,t,n,o)})))&&(s+=a)}else s+=this.renderTokens(e[4],t,n,r,o);return s}},k.prototype.renderInverted=function(e,t,n,r,o){var i=t.lookup(e[1]);if(!i||c(i)&&0===i.length)return this.renderTokens(e[4],t,n,r,o)},k.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},k.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),i=l(n)?n(e[1]):n[e[1]];if(null!=i){var s=e[6],a=e[5],c=e[4],u=i;0==a&&c&&(u=this.indentPartial(i,c,s));var f=this.parse(u,o);return this.renderTokens(f,t,n,u,r)}}},k.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},k.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||x.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&r===x.escape?String(o):r(o)},k.prototype.rawValue=function(e){return e[1]},k.prototype.getConfigTags=function(e){return c(e)?e:e&&"object"==typeof e?e.tags:void 0},k.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!c(e)?e.escape:void 0};var x={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){C.templateCache=e},get templateCache(){return C.templateCache}},C=new k;x.clearCache=function(){return C.clearCache()},x.parse=function(e,t){return C.parse(e,t)},x.render=function(e,t,n,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(c(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return C.render(e,t,n,r)},x.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return g[e]}))},x.Scanner=m,x.Context=E,x.Writer=k;const O=x;var j,S,_,T=t()(process.argv.slice(2)),A=String.raw(j||(S=["",""],_||(_=S.slice(0)),j=Object.freeze(Object.defineProperties(S,{raw:{value:Object.freeze(_)}}))),T.xconfig||""),U=s().dirname(A),P=(process.env.XConfigGenENV||"").toUpperCase();if(O.escape=function(e){return e},!P)throw new Error("请配置系统环境变量【XConfigGenENV】，如：DEV、FAT、PRD！");if(console.log("当前所在系统环境为：".concat(P)),!A||!o().existsSync(A))throw new Error("配置文件 JSON 数据源不存在！");console.log("当前配置数据源路径是：".concat(A));var F=function(e){var t=s().resolve(U,e);if(!o().existsSync(t))throw new Error("文件不存在：".concat(t));return o().readFileSync(t,"utf-8")},V=F(A);console.log("当前配置数据源内容是：",V);var N=JSON.parse(V);Object.keys(N.configs).forEach((function(e){var t=N.configs[e];console.log("正在处理："+t.name);var n=t.val[P];if(!n)throw new Error("数据源中必须要提供【".concat(t.name,"】在环境【").concat(P,"】的配置信息！"));t.cfg.forEach((function(e){var t,r,i=F(e.source),a=O.render(i,{ENV:P,config:n});t=e.target,r=a,o().writeFileSync(s().resolve(U,t),r,"utf-8"),console.log("文件已生成：".concat(e.target,"。"))}))}))})()})();